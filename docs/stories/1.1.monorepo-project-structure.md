# Story 1.1: Monorepo and Project Structure Setup

## Status

Ready for Review

## Story

**As a** developer,
**I want** to set up a monorepo structure with shared packages and clear separation of concerns,
**so that** development teams can work efficiently across mobile and web platforms with consistent code sharing.

## Acceptance Criteria

1. Monorepo structure created with separate apps/ and packages/ directories
2. React Native mobile app scaffold created in apps/mobile/ with package.json and basic configuration
3. Next.js web app scaffold created in apps/web/ with package.json and basic configuration
4. Shared types package created in packages/shared/types/ with TypeScript configuration
5. Shared utilities package created in packages/shared/utils/ with common helper functions
6. Shared constants package created in packages/shared/constants/ with app-wide constants
7. Root package.json configured with workspace dependencies and npm scripts
8. ESLint and Prettier configurations shared across all packages
9. Git repository initialized with appropriate .gitignore for monorepo
10. Documentation explaining project structure and development workflow

## Tasks / Subtasks

- [x] Task 1: Create monorepo directory structure (AC: 1)
  - [x] Create root directory structure with apps/ and packages/ folders
  - [x] Create apps/mobile/ directory for React Native app
  - [x] Create apps/web/ directory for Next.js app
  - [x] Create packages/shared/ directory for shared packages

- [x] Task 2: Set up React Native mobile app scaffold (AC: 2)
  - [x] Initialize React Native project in apps/mobile/ with modern app structure
  - [x] Configure package.json with required dependencies
  - [x] Set up basic app/ folder structure (app/(tabs)/, app/\_layout.tsx, app/screens/, app/components/, app/services/, app/hooks/, app/store/)
  - [x] Configure TypeScript for React Native
  - [x] Set up Metro bundler configuration

- [x] Task 3: Set up Next.js web app scaffold (AC: 3)
  - [x] Initialize Next.js project in apps/web/ with modern app structure
  - [x] Configure package.json with required dependencies
  - [x] Set up basic app/ folder structure (app/api/, app/(auth)/, app/(dashboard)/, app/layout.tsx, app/page.tsx, app/components/, app/hooks/, app/store/)
  - [x] Configure TypeScript for Next.js
  - [x] Set up Next.js configuration file

- [x] Task 4: Create shared packages (AC: 4, 5, 6)
  - [x] Create packages/shared/ with TypeScript configuration
    - [x] Set up package.json for shared package
    - [x] Create basic type definitions for shared interfaces
    - [x] Configure TypeScript compiler options
  - [x] Create packages/shared/src/utils/ with common helper functions
    - [x] Set up package.json for shared package
    - [x] Create initial utility functions for common operations
    - [x] Export utilities for use across apps
  - [x] Create packages/shared/src/constants/ with app-wide constants
    - [x] Set up package.json for shared package
    - [x] Define application constants (API endpoints, status codes, etc.)
    - [x] Export constants for use across apps

- [x] Task 5: Configure root package.json with workspace setup (AC: 7)
  - [x] Create root package.json with workspace configuration
  - [x] Configure npm scripts for common operations (build, test, lint)
  - [x] Set up workspace dependencies management
  - [x] Configure dev dependencies for shared tooling

- [x] Task 6: Set up shared ESLint and Prettier configurations (AC: 8)
  - [x] Create .eslintrc.js configuration file at root
  - [x] Create .prettierrc configuration file at root
  - [x] Configure ESLint and Prettier for monorepo structure
  - [x] Add linting and formatting scripts to package.json
  - [x] Set up VSCode settings for consistent formatting

- [x] Task 7: Initialize Git repository with appropriate configuration (AC: 9)
  - [x] Initialize Git repository
  - [x] Create .gitignore file for monorepo (node_modules, build files, etc.)
  - [x] Configure Git for monorepo structure
  - [x] Set up Git hooks if needed for code quality

- [x] Task 8: Create project documentation (AC: 10)
  - [x] Create README.md explaining project structure
  - [x] Document development workflow and commands
  - [x] Create package-specific documentation
  - [x] Set up contribution guidelines

## Dev Notes

### Project Structure Information

Based on the implementation plan, the monorepo should follow this structure:

```
kadmawala-tracking/
├── apps/
│   ├── mobile/                 # React Native app
│   │   ├── app/                # React Native app structure (modern)
│   │   │   ├── (tabs)/         # Tab navigation screens
│   │   │   ├── _layout.tsx     # Root layout
│   │   │   ├── screens/        # App screens
│   │   │   ├── components/     # UI components
│   │   │   ├── services/       # Local services
│   │   │   ├── hooks/          # Custom hooks
│   │   │   └── store/          # Zustand store
│   │   └── package.json
│   └── web/                    # Next.js admin dashboard
│       ├── app/                # Next.js app structure (modern)
│       │   ├── api/            # API routes
│       │   ├── (auth)/         # Auth route groups
│       │   ├── (dashboard)/    # Dashboard route groups
│       │   ├── globals.css     # Global styles
│       │   ├── layout.tsx      # Root layout
│       │   ├── page.tsx        # Home page
│       │   ├── components/     # React components
│       │   ├── hooks/          # Custom hooks
│       │   └── store/          # Zustand store
│       └── package.json
├── packages/
│   └── shared/
│       ├── types/              # TypeScript definitions
│       ├── utils/              # Shared utilities
│       ├── constants/          # Shared constants
│       └── package.json
└── package.json                # Root package.json
```

[Source: docs/location-tracking-implementation-plan.md#Project Structure]

### Technology Stack Requirements

- **Mobile:** React Native (Android only) with minimum SDK version 21 (Android 5.0)
- **Web:** Next.js with API routes for server-side functionality and middleware
- **State Management:** Zustand (shared between web and mobile platforms)
- **Backend:** Supabase (PostgreSQL database) with Row Level Security (RLS)
- **Project Type:** Monorepo with shared packages for type definitions, utilities, and services

[Source: docs/location-tracking-implementation-plan.md#Technology Stack]

### Shared TypeScript Interfaces Required

Based on the implementation plan, the shared types package should include:

- Employee profile data (id, humanReadableUserId, name, contact info, active status)
- Check-in/out data structures (employeeId, location, selfie, timestamp, userId)
- Location data format (latitude, longitude, accuracy, timestamp, distanceFromPrevious)
- Path tracking data (pathSegments, distance calculations, movement thresholds)
- Attendance record model (check-in/out times, locations, selfies, userId)
- Location update tracking (employeeId, coordinates, timestamp, pathSegmentId)
- JWT token structures (access/refresh tokens, claims, expiration)
- Security audit data (security events, authentication attempts, API access)

[Source: docs/location-tracking-implementation-plan.md#Shared Type Definitions]

### Previous Story Insights

No previous story context exists (this is the first story in the project).

### Testing

No specific guidance found in architecture docs for testing standards. Recommend setting up basic testing frameworks:

- Jest for unit testing
- React Native Testing Library for mobile components
- React Testing Library for web components
- Test files should be co-located with source files or in dedicated **tests** directories

### Technical Constraints

- Repository Structure: Monorepo with shared packages and clear separation of concerns
- Mobile Platform: Android-only deployment
- Web Platform: Next.js admin dashboard
- Shared State: Zustand for consistent state management across platforms
- TypeScript: Strict typing across all packages and applications
- Backend Integration: Supabase with PostgreSQL database

[Source: docs/location-tracking-implementation-plan.md#Repository Structure]

## Change Log

| Date       | Version | Description            | Author             |
| ---------- | ------- | ---------------------- | ------------------ |
| 2025-11-13 | 1.0     | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used

claude-sonnet-4-5-20250929

### Debug Log References

No debug logs required for this implementation.

### Completion Notes List

- All acceptance criteria have been met
- Monorepo structure is properly set up with apps/ and packages/ directories
- React Native mobile app scaffold is configured with required folder structure
- Next.js web app scaffold is configured with required folder structure
- Shared package (@pgn/shared) is created with organized types, utils, and constants
- Root package.json is configured with workspaces and comprehensive npm scripts
- ESLint and Prettier configurations are set up for monorepo consistency
- Git repository is initialized with appropriate .gitignore file
- Comprehensive README.md documentation is created with setup and usage instructions

### File List

**Root Configuration Files:**
- package.json - Root package.json with workspace configuration
- .gitignore - Git ignore file for monorepo
- .eslintrc.js - ESLint configuration
- .prettierrc - Prettier configuration
- README.md - Project documentation
- .vscode/settings.json - VS Code settings

**Mobile App (apps/mobile/):**
- package.json - React Native app configuration
- app/ - Main app structure
- app/(tabs)/ - Tab navigation
- app/_layout.tsx - Root layout
- app/screens/ - App screens directory
- app/components/ - UI components directory
- app/services/ - Local services directory
- app/hooks/ - Custom hooks directory
- app/store/ - Zustand store directory

**Web App (apps/web/):**
- package.json - Next.js app configuration
- app/ - Next.js app structure
- app/api/ - API routes directory
- app/(auth)/ - Auth route groups directory
- app/(dashboard)/ - Dashboard route groups directory
- app/layout.tsx - Root layout
- app/page.tsx - Home page
- app/components/ - React components directory
- app/hooks/ - Custom hooks directory
- app/store/ - Zustand store directory

**Shared Package (packages/shared/):**
- package.json - Shared package configuration
- tsconfig.json - TypeScript configuration
- src/index.ts - Main entry point
- src/types/ - TypeScript definitions
- src/utils/ - Shared utility functions
- src/constants/ - Application constants

## QA Results

<!-- To be filled by QA Agent -->
