# Story 1.1: Monorepo and Project Structure Setup

## Status
Draft

## Story
**As a** developer,
**I want** to set up a monorepo structure with shared packages and clear separation of concerns,
**so that** development teams can work efficiently across mobile and web platforms with consistent code sharing.

## Acceptance Criteria
1. Monorepo structure created with separate apps/ and packages/ directories
2. React Native mobile app scaffold created in apps/mobile/ with package.json and basic configuration
3. Next.js web app scaffold created in apps/web/ with package.json and basic configuration
4. Shared types package created in packages/shared/types/ with TypeScript configuration
5. Shared utilities package created in packages/shared/utils/ with common helper functions
6. Shared constants package created in packages/shared/constants/ with app-wide constants
7. Root package.json configured with workspace dependencies and npm scripts
8. ESLint and Prettier configurations shared across all packages
9. Git repository initialized with appropriate .gitignore for monorepo
10. Documentation explaining project structure and development workflow

## Tasks / Subtasks
- [ ] Task 1: Create monorepo directory structure (AC: 1)
  - [ ] Create root directory structure with apps/ and packages/ folders
  - [ ] Create apps/mobile/ directory for React Native app
  - [ ] Create apps/web/ directory for Next.js app
  - [ ] Create packages/shared/ directory for shared packages

- [ ] Task 2: Set up React Native mobile app scaffold (AC: 2)
  - [ ] Initialize React Native project in apps/mobile/ with modern app structure
  - [ ] Configure package.json with required dependencies
  - [ ] Set up basic app/ folder structure (app/(tabs)/, app/_layout.tsx, app/screens/, app/components/, app/services/, app/hooks/, app/store/)
  - [ ] Configure TypeScript for React Native
  - [ ] Set up Metro bundler configuration

- [ ] Task 3: Set up Next.js web app scaffold (AC: 3)
  - [ ] Initialize Next.js project in apps/web/ with modern app structure
  - [ ] Configure package.json with required dependencies
  - [ ] Set up basic app/ folder structure (app/api/, app/(auth)/, app/(dashboard)/, app/layout.tsx, app/page.tsx, app/components/, app/hooks/, app/store/)
  - [ ] Configure TypeScript for Next.js
  - [ ] Set up Next.js configuration file

- [ ] Task 4: Create shared packages (AC: 4, 5, 6)
  - [ ] Create packages/shared/types/ with TypeScript configuration
    - [ ] Set up package.json for types package
    - [ ] Create basic type definitions for shared interfaces
    - [ ] Configure TypeScript compiler options
  - [ ] Create packages/shared/utils/ with common helper functions
    - [ ] Set up package.json for utils package
    - [ ] Create initial utility functions for common operations
    - [ ] Export utilities for use across apps
  - [ ] Create packages/shared/constants/ with app-wide constants
    - [ ] Set up package.json for constants package
    - [ ] Define application constants (API endpoints, status codes, etc.)
    - [ ] Export constants for use across apps

- [ ] Task 5: Configure root package.json with workspace setup (AC: 7)
  - [ ] Create root package.json with workspace configuration
  - [ ] Configure npm scripts for common operations (build, test, lint)
  - [ ] Set up workspace dependencies management
  - [ ] Configure dev dependencies for shared tooling

- [ ] Task 6: Set up shared ESLint and Prettier configurations (AC: 8)
  - [ ] Create .eslintrc.js configuration file at root
  - [ ] Create .prettierrc configuration file at root
  - [ ] Configure ESLint and Prettier for monorepo structure
  - [ ] Add linting and formatting scripts to package.json
  - [ ] Set up VSCode settings for consistent formatting

- [ ] Task 7: Initialize Git repository with appropriate configuration (AC: 9)
  - [ ] Initialize Git repository
  - [ ] Create .gitignore file for monorepo (node_modules, build files, etc.)
  - [ ] Configure Git for monorepo structure
  - [ ] Set up Git hooks if needed for code quality

- [ ] Task 8: Create project documentation (AC: 10)
  - [ ] Create README.md explaining project structure
  - [ ] Document development workflow and commands
  - [ ] Create package-specific documentation
  - [ ] Set up contribution guidelines

## Dev Notes

### Project Structure Information
Based on the implementation plan, the monorepo should follow this structure:

```
kadmawala-tracking/
├── apps/
│   ├── mobile/                 # React Native app
│   │   ├── app/                # React Native app structure (modern)
│   │   │   ├── (tabs)/         # Tab navigation screens
│   │   │   ├── _layout.tsx     # Root layout
│   │   │   ├── screens/        # App screens
│   │   │   ├── components/     # UI components
│   │   │   ├── services/       # Local services
│   │   │   ├── hooks/          # Custom hooks
│   │   │   └── store/          # Zustand store
│   │   └── package.json
│   └── web/                    # Next.js admin dashboard
│       ├── app/                # Next.js app structure (modern)
│       │   ├── api/            # API routes
│       │   ├── (auth)/         # Auth route groups
│       │   ├── (dashboard)/    # Dashboard route groups
│       │   ├── globals.css     # Global styles
│       │   ├── layout.tsx      # Root layout
│       │   ├── page.tsx        # Home page
│       │   ├── components/     # React components
│       │   ├── hooks/          # Custom hooks
│       │   └── store/          # Zustand store
│       └── package.json
├── packages/
│   └── shared/
│       ├── types/              # TypeScript definitions
│       ├── utils/              # Shared utilities
│       ├── constants/          # Shared constants
│       └── package.json
└── package.json                # Root package.json
```

[Source: docs/location-tracking-implementation-plan.md#Project Structure]

### Technology Stack Requirements
- **Mobile:** React Native (Android only) with minimum SDK version 21 (Android 5.0)
- **Web:** Next.js with API routes for server-side functionality and middleware
- **State Management:** Zustand (shared between web and mobile platforms)
- **Backend:** Supabase (PostgreSQL database) with Row Level Security (RLS)
- **Project Type:** Monorepo with shared packages for type definitions, utilities, and services

[Source: docs/location-tracking-implementation-plan.md#Technology Stack]

### Shared TypeScript Interfaces Required
Based on the implementation plan, the shared types package should include:
- Employee profile data (id, humanReadableUserId, name, contact info, active status)
- Check-in/out data structures (employeeId, location, selfie, timestamp, userId)
- Location data format (latitude, longitude, accuracy, timestamp, distanceFromPrevious)
- Path tracking data (pathSegments, distance calculations, movement thresholds)
- Attendance record model (check-in/out times, locations, selfies, userId)
- Location update tracking (employeeId, coordinates, timestamp, pathSegmentId)
- JWT token structures (access/refresh tokens, claims, expiration)
- Security audit data (security events, authentication attempts, API access)

[Source: docs/location-tracking-implementation-plan.md#Shared Type Definitions]

### Previous Story Insights
No previous story context exists (this is the first story in the project).

### Testing
No specific guidance found in architecture docs for testing standards. Recommend setting up basic testing frameworks:
- Jest for unit testing
- React Native Testing Library for mobile components
- React Testing Library for web components
- Test files should be co-located with source files or in dedicated __tests__ directories

### Technical Constraints
- Repository Structure: Monorepo with shared packages and clear separation of concerns
- Mobile Platform: Android-only deployment
- Web Platform: Next.js admin dashboard
- Shared State: Zustand for consistent state management across platforms
- TypeScript: Strict typing across all packages and applications
- Backend Integration: Supabase with PostgreSQL database

[Source: docs/location-tracking-implementation-plan.md#Repository Structure]

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-11-13 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
<!-- To be filled by Dev Agent -->

### Debug Log References
<!-- To be filled by Dev Agent -->

### Completion Notes List
<!-- To be filled by Dev Agent -->

### File List
<!-- To be filled by Dev Agent -->

## QA Results
<!-- To be filled by QA Agent -->